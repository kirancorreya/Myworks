{"ast":null,"code":"var _jsxFileName = \"/Users/kirancorreya/Site/Starlify/src/pages/dashboard/browsers/FlowDetails.js\";\nimport React, { Component } from \"react\";\nimport { fetchFlowDetils } from \"../../../store/system/systemActions\";\nimport { connect } from \"react-redux\";\nimport { Modal, ModalBody, FormGroup, Input } from \"reactstrap\";\nimport Select from \"react-select\";\nimport check from \"../../../_assets/icons/icons/check-icon.svg\";\nimport addCircle from \"../../../_assets/icons/icons/add-icon-circle.svg\";\nimport sequence from \"../../../_assets/images/Sequence-diagram.png\";\nimport edit from \"../../../_assets/icons/icons/edit.svg\";\nimport { fetchModel } from '../../../store/model/modelActions';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport arrayMove from 'array-move'; //invocation listing - sorting module \n\nconst SortableItem = SortableElement(({\n  value\n}) => React.createElement(\"li\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 16\n  },\n  __self: this\n}, React.createElement(\"ul\", {\n  className: \"row body\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17\n  },\n  __self: this\n}, React.createElement(\"li\", {\n  className: \"col-md-1\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18\n  },\n  __self: this\n}, React.createElement(\"i\", {\n  className: \"fas fa-bars\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 19\n  },\n  __self: this\n})), React.createElement(\"li\", {\n  className: \"col-md-4 text-white\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 21\n  },\n  __self: this\n}, value.consumerSystem), React.createElement(\"li\", {\n  className: \"col-md-3 text-white\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 24\n  },\n  __self: this\n}, value.providerSystem), React.createElement(\"li\", {\n  className: \"col-md-3 text-white word-wrap\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 27\n  },\n  __self: this\n}, value.consumedService), React.createElement(\"li\", {\n  className: \"col-md-1 text-white\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 30\n  },\n  __self: this\n}, React.createElement(\"i\", {\n  className: \"fas fa-trash-alt\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 31\n  },\n  __self: this\n}))))); //invocation listing - sorting module \n\nconst SortableList = SortableContainer(({\n  items\n}) => {\n  return React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, items.map((value, index) => React.createElement(SortableItem, {\n    key: \"item-\".concat(index),\n    index: index,\n    value: value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  })));\n}); //Flow Details\n\nclass FlowDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSortEnd = ({\n      oldIndex,\n      newIndex\n    }) => {\n      this.setState(({\n        data\n      }) => ({\n        data: arrayMove(data, oldIndex, newIndex)\n      }), () => {\n        this.sortInvocation();\n      });\n      this.sortInvocation();\n    };\n\n    this.state = {\n      formData: {\n        name: \"\",\n        description: \"\",\n        supportLevel: \"\",\n        custom: {\n          documentationUrl: \"\"\n        }\n      },\n      filterOptions: [],\n      invocations: [],\n      referenceData: {\n        consumerSystem: \"\",\n        consumerSystemId: \"\",\n        consumedService: \"\",\n        consumedServiceId: \"\",\n        providerSystem: \"\"\n      },\n      servicesList: \"\",\n      data: [],\n      referenceAdd: false\n    };\n    this.close = this.close.bind(this);\n    this.toggleDescription = this.toggleDescription.bind(this);\n    this.modalToggle = this.modalToggle.bind(this);\n  }\n\n  componentDidUpdate() {\n    if (this.props.type === 'FETCH_FLOW_DETAILS_SUCCESS' && this.props.flowDetails.invocations !== this.state.invocations) {\n      this.setState({\n        'invocations': this.props.flowDetails.invocations\n      });\n      this.displayInvocation();\n    }\n  } //display invocation list\n\n\n  displayInvocation() {\n    this.setState({\n      'data': []\n    });\n    var serviceName, serviceId;\n    this.props.flowDetails.invocations.sort((a, b) => a.index - b.index).map(invocation => {\n      invocation._links.filter(links => links.rel === \"THROUGH\").map(reference => {\n        this.props.systems.map(system => {\n          system.references.filter(systemReference => systemReference.id === reference.params.id).map((referenceData, i) => {\n            referenceData._links.filter(link => link.rel === 'TO').map((serviceData, i) => {\n              serviceName = serviceData.title;\n              serviceId = serviceData.params.id;\n              fetch(process.env.REACT_APP_API + serviceData.uri, {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              }).then(response => response.json()).then(responseJson => {\n                referenceData._links.filter(link => link.rel === 'OF').map((consumerSystem, i) => {\n                  this.setState(prevState => ({\n                    data: [...prevState.data, {\n                      'id': invocation.index,\n                      'invocationId': invocation.id,\n                      'referenceId': referenceData.id,\n                      'refrenceName': referenceData.name,\n                      'consumedServiceId': serviceId,\n                      'consumedService': serviceName,\n                      'consumerSystem': consumerSystem.title,\n                      'consumerSystemId': consumerSystem.params.id,\n                      'providerSystem': responseJson._links[0].title,\n                      'providerSystemId': responseJson._links[0].params.id,\n                      'type': 'existing'\n                    }]\n                  }));\n                });\n              });\n            });\n          });\n        });\n      });\n    });\n  } //handling change of documentation url as custom attribute\n\n\n  handleUrlChange(event) {\n    const formData = this.state.formData;\n    formData[event.target.name] = {\n      documentationUrl: event.target.value\n    };\n    this.setState({\n      formData\n    });\n  } //handling change of flow basic attributes\n\n\n  handleChange(event) {\n    const formData = this.state.formData;\n    formData[event.target.name] = event.target.value;\n    this.setState({\n      formData\n    });\n  } //handling change of refrence attributes\n\n\n  handleReferenceChange(event) {\n    var index = event.target.selectedIndex;\n    const referenceData = this.state.referenceData;\n    referenceData[event.target.name] = event.target[index].text;\n    this.setState({\n      referenceData\n    });\n    referenceData[event.target.name + 'Id'] = event.target.value;\n  } //show or hide add refrence settings\n\n\n  toggleAddReference(event) {\n    this.setState(prev => ({\n      referenceAdd: !prev.referenceAdd\n    }));\n  } //update flow\n\n\n  updateFlow() {\n    fetch(process.env.REACT_APP_API + \"\".concat(this.props.activeModel, \"/flow/\") + this.props.activeFlow, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(this.state.formData)\n    }).then(response => {\n      if (this.state.deletedSourceSystems.length > 0) this.deleteSourceSystems();\n      if (this.state.deletedTargetSystems.length > 0) this.deleteTargetSystems();\n      this.addSourceSystems();\n      this.addTargetSystems();\n      this.setState(prevState => ({\n        modal: !prevState.modal\n      }));\n      setTimeout(() => {\n        this.props.getFlowDetails(this.props.activeModelId, this.props.activeFlow);\n      }, 2000);\n    }).catch(error => console.log(error));\n  } //add source systems\n\n\n  addSourceSystems() {\n    this.state.sourceSystems.map(system => {\n      fetch(process.env.REACT_APP_API + \"/hypermedia/network/\" + this.props.activeModelId + \"/flow/\" + this.props.activeFlow + \"/source/\" + system.value, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => {}).catch(error => console.log(error));\n      return true;\n    });\n  } //add target systems\n\n\n  addTargetSystems() {\n    this.state.targetSystems.map(system => {\n      fetch(process.env.REACT_APP_API + \"/hypermedia/network/\" + this.props.activeModelId + \"/flow/\" + this.props.activeFlow + \"/target/\" + system.value, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => {}).catch(error => console.log(error));\n      return true;\n    });\n  } //delete source systems\n\n\n  deleteSourceSystems() {\n    this.state.deletedSourceSystems.map(system => {\n      fetch(process.env.REACT_APP_API + \"/hypermedia/network/\" + this.props.activeModelId + \"/flow/\" + this.props.activeFlow + \"/source/\" + system.value, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => {}).catch(error => console.log(error));\n      return true;\n    });\n  } //delete target systems\n\n\n  deleteTargetSystems() {\n    this.state.deletedTargetSystems.map(system => {\n      fetch(process.env.REACT_APP_API + \"/hypermedia/network/\" + this.props.activeModelId + \"/flow/\" + this.props.activeFlow + \"/target/\" + system.value, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => {}).catch(error => console.log(error));\n      return true;\n    });\n  } //handle change of source systems\n\n\n  handleSourceChange(option, event) {\n    let difference = this.state.sourceSystems.filter(x => !option.includes(x));\n\n    if (difference.length > 0) {\n      this.state.deletedSourceSystems.push(difference[0]);\n    }\n\n    this.setState(state => {\n      return {\n        sourceSystems: option\n      };\n    });\n  } //handle change of target systems\n\n\n  handleTargetChange(option) {\n    let difference = this.state.targetSystems.filter(x => !option.includes(x));\n\n    if (difference.length > 0) {\n      this.state.deletedTargetSystems.push(difference[0]);\n    }\n\n    this.setState(state => {\n      return {\n        targetSystems: option\n      };\n    });\n  } //show or hide description\n\n\n  toggleDescription() {\n    this.setState(state => ({\n      collapse: !state.collapse\n    }));\n  } //closes the flow detail window\n\n\n  close(type) {\n    this.props.close(type);\n  } //show or hide flow full edit pop up\n\n\n  modalToggle(e, data) {\n    this.state.sourceSystems = [];\n    this.state.targetSystems = [];\n    this.state.deletedSourceSystems = [];\n    this.state.deletedTargetSystems = [];\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n\n    this.props.flowDetails._links.filter(links => links.rel === \"SOURCE\").map(source => {\n      this.state.sourceSystems.push({\n        value: source.params.id,\n        label: source.title\n      });\n      return true;\n    });\n\n    this.props.flowDetails._links.filter(links => links.rel === \"TARGET\").map(target => {\n      this.state.targetSystems.push({\n        value: target.params.id,\n        label: target.title\n      });\n      return true;\n    });\n\n    this.setState({\n      formData: {\n        name: this.props.flowDetails.name,\n        description: this.props.flowDetails.description,\n        supportLevel: this.props.flowDetails.supportLevel,\n        custom: {\n          documentationUrl: this.props.flowDetails.custom.documentationUrl\n        }\n      }\n    });\n    this.getSystems();\n  }\n\n  getSystems() {\n    return fetch(process.env.REACT_APP_API + \"/hypermedia/network/\" + this.props.activeModelId + \"/allsystems\").then(res => res.json()).then(response => {\n      this.setState({\n        systems: response\n      });\n      response.map((systems, i) => {\n        this.state.filterOptions.push({\n          value: systems.id,\n          label: systems.name\n        });\n      });\n      return true;\n    }).catch(error => console.log(error));\n  }\n\n  getSystemServices(event) {\n    let parents = this.props.systems;\n    let parent = parents.filter(parent => parent.name === event.target.value);\n    if (parent) this.setState({\n      servicesList: parent[0].services\n    });\n    var index = event.target.selectedIndex;\n    const referenceData = this.state.referenceData;\n    referenceData[event.target.name] = event.target[index].text;\n    this.setState({\n      referenceData\n    });\n    referenceData[event.target.name + 'Id'] = event.target.value;\n  } //create reference and invocation\n\n\n  createReference(event) {\n    /*this.setState(prevState => ({\n      data: [...prevState.data, {'invocationId' : '','referenceId' : '', 'refrenceName' :  '', 'consumedServiceId' : this.state.referenceData.consumedServiceId, \n      'consumedService' : this.state.referenceData.consumedService, 'consumerSystem' : this.state.referenceData.consumerSystem, 'consumerSystemId' : this.state.referenceData.consumerSystemId, 'providerSystem': this.state.referenceData.providerSystem, 'providerSystemId' :this.state.referenceData.providerSystemId, 'type' : 'new'}]\n    }))*/\n    fetch(process.env.REACT_APP_API + \"/hypermedia/network/\".concat(this.props.activeModelId, \"/system/\").concat(this.state.referenceData.consumerSystemId, \"/reference/service/\").concat(this.state.referenceData.consumedServiceId), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(referenceJson => {\n      this.props.getSystems(this.props.activeModelId);\n      fetch(process.env.REACT_APP_API + \"/model/\".concat(this.props.activeModelId, \"/service/\").concat(this.props.activeFlow, \"/invocation/\") + referenceJson.id, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => response.json()).then(invocationJson => {\n        this.props.getFlowDetails(this.props.activeModelId, this.props.activeFlow);\n        this.toggleAddReference();\n      }).catch(error => console.log(error));\n    });\n  } //sort the invocation list\n\n\n  sortInvocation() {\n    console.log(this.state.data);\n    this.state.data.map((reference, index) => {\n      fetch(process.env.REACT_APP_API + \"/hypermedia/network/\".concat(this.props.activeModelId, \"/flow/\").concat(this.props.activeFlow, \"/invocation/\") + reference.invocationId, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          'index': index\n        })\n      }).then(response => {\n        return true;\n      }).catch(error => console.log(error));\n    });\n    this.props.getFlowDetails(this.props.activeModel, this.props.activeFlow);\n  } //handling sort event of the invocation list\n\n\n  render() {\n    var formData = this.state.formData;\n    return React.createElement(\"div\", {\n      className: \"browser\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      isOpen: this.state.modal,\n      toggle: this.modalToggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463\n      },\n      __self: this\n    }, React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"editFlow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"d-inline-block modal-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466\n      },\n      __self: this\n    }, \"Edit Flow Details\"), React.createElement(\"button\", {\n      className: \"btn grey-btn modal-top-btn\",\n      onClick: this.updateFlow.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467\n      },\n      __self: this\n    }, \"Done \", React.createElement(\"img\", {\n      src: check,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"ModalInput m-t-50\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474\n      },\n      __self: this\n    }, \"Flow name\"), React.createElement(\"input\", {\n      type: \"text\",\n      value: formData.name,\n      name: \"name\",\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"ModalInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483\n      },\n      __self: this\n    }, React.createElement(Input, {\n      className: \"select-css\",\n      type: \"select\",\n      name: \"supportLevel\",\n      value: formData.supportLevel,\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491\n      },\n      __self: this\n    }, \"Support Level\"), React.createElement(\"option\", {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492\n      },\n      __self: this\n    }, \"Gold\"), React.createElement(\"option\", {\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493\n      },\n      __self: this\n    }, \"Platinum\"), React.createElement(\"option\", {\n      value: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494\n      },\n      __self: this\n    }, \"Silver\"), \"))}\"))), React.createElement(\"div\", {\n      className: \"ModalInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500\n      },\n      __self: this\n    }, \"Documentation URL\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"custom\",\n      value: formData.custom.documentationUrl,\n      onChange: this.handleUrlChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"ModalInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 508\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 509\n      },\n      __self: this\n    }, \"Description\"), React.createElement(\"textarea\", {\n      type: \"text\",\n      name: \"description\",\n      value: formData.description,\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"ModalInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518\n      },\n      __self: this\n    }, \"Source system\"), React.createElement(\"div\", {\n      className: \"searchbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      sm: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520\n      },\n      __self: this\n    }, React.createElement(Select, {\n      name: \"filters\",\n      placeholder: \"\",\n      value: this.state.sourceSystems,\n      options: this.state.filterOptions,\n      onChange: this.handleSourceChange.bind(this),\n      multi: true,\n      clearable: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"ModalInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534\n      },\n      __self: this\n    }, \"Target system\"), React.createElement(\"div\", {\n      className: \"searchbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      sm: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536\n      },\n      __self: this\n    }, React.createElement(Select, {\n      name: \"filters\",\n      placeholder: \"\",\n      value: this.state.targetSystems,\n      options: this.state.filterOptions,\n      onChange: this.handleTargetChange.bind(this),\n      multi: true,\n      clearable: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537\n      },\n      __self: this\n    }))))))), React.createElement(\"div\", {\n      className: \"browser_header text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"icon icon-Share submenu-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      className: \"d-inline-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557\n      },\n      __self: this\n    }, \"Flow Details\"), React.createElement(\"img\", {\n      src: edit,\n      alt: \"starlify\",\n      className: \"edit\",\n      onClick: () => this.modalToggle(this, this.props.flowDetails),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fas fa-times system-down-icon browser_close\",\n      onClick: () => this.close(\"flowDetail\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"browser_wrapper browser_body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"name m-b-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-grey\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"p\", {\n      className: \"text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573\n      },\n      __self: this\n    }, this.props.flowDetails.name)), React.createElement(\"div\", {\n      className: \"support m-b-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 575\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-grey\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 576\n      },\n      __self: this\n    }, \"Support level\"), this.props.flowDetails.supportLevel === 1 && React.createElement(\"p\", {\n      className: \"text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 578\n      },\n      __self: this\n    }, \"Gold\"), this.props.flowDetails.supportLevel === 2 && React.createElement(\"p\", {\n      className: \"text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581\n      },\n      __self: this\n    }, \"Platinum\"), this.props.flowDetails.supportLevel === 3 && React.createElement(\"p\", {\n      className: \"text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 584\n      },\n      __self: this\n    }, \"Silver\")), React.createElement(\"div\", {\n      className: \"url m-b-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 587\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-grey\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588\n      },\n      __self: this\n    }, \"Documentation URL\"), React.createElement(\"p\", {\n      className: \"text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 589\n      },\n      __self: this\n    }, this.props.flowDetails.custom ? this.props.flowDetails.custom.documentationUrl : \"\")), React.createElement(\"div\", {\n      className: \"desc m-b-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-grey\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596\n      },\n      __self: this\n    }, \"Description\"), React.createElement(\"p\", {\n      className: \"text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597\n      },\n      __self: this\n    }, this.props.flowDetails.description)), React.createElement(\"div\", {\n      className: \"system m-b-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 599\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-grey\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 600\n      },\n      __self: this\n    }, \"Source\"), this.props.flowDetails._links ? this.props.flowDetails._links.filter(links => links.rel === \"SOURCE\").map((source, index) => {\n      return React.createElement(\"p\", {\n        key: index,\n        className: \"text-white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605\n        },\n        __self: this\n      }, source.title);\n    }) : \"\"), React.createElement(\"div\", {\n      className: \"target m-b-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-grey\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 610\n      },\n      __self: this\n    }, \"Target\"), this.props.flowDetails._links ? this.props.flowDetails._links.filter(links => links.rel === \"TARGET\").map((target, index) => {\n      return React.createElement(\"p\", {\n        key: index,\n        className: \"text-white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 615\n        },\n        __self: this\n      }, target.title);\n    }) : \"\"), React.createElement(\"div\", {\n      className: \"technical row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"technical-header col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 620\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"text-grey\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 621\n      },\n      __self: this\n    }, \"Technical\"), !this.state.referenceAdd && React.createElement(\"div\", {\n      className: \"addModal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 623\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      onClick: this.toggleAddReference.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 624\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: addCircle,\n      alt: \"starlify\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625\n      },\n      __self: this\n    }), \"Add Refrence\"))), React.createElement(\"div\", {\n      className: \"technical-body col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 631\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"row head\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"col-md-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"col-md-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 634\n      },\n      __self: this\n    }, \"Consumer\"), React.createElement(\"li\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 635\n      },\n      __self: this\n    }, \"Provider\"), React.createElement(\"li\", {\n      className: \"col-md-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636\n      },\n      __self: this\n    }, \"Service\"), React.createElement(\"li\", {\n      className: \"col-md-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637\n      },\n      __self: this\n    })), React.createElement(SortableList, {\n      items: this.state.data,\n      onSortEnd: this.onSortEnd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 640\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sequence\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 641\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: sequence,\n      alt: \"starlify\",\n      className: \"d-block mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 642\n      },\n      __self: this\n    }))), this.state.referenceAdd && React.createElement(\"div\", {\n      className: \"d-block mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 650\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"d-flex formGroupWrapper justify-content-md-center create-ref\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 651\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 652\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"select\",\n      name: \"consumerSystem\",\n      onChange: this.handleReferenceChange.bind(this),\n      className: \"p-l-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 653\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 659\n      },\n      __self: this\n    }, \"Consumer System\"), this.props.systems ? this.props.systems.map((item, i) => {\n      return React.createElement(\"option\", {\n        key: i,\n        value: item.id,\n        id: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 663\n        },\n        __self: this\n      }, item.name);\n    }) : \"\")), React.createElement(\"li\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 671\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"select\",\n      name: \"providerSystem\",\n      onChange: this.getSystemServices.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 672\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 677\n      },\n      __self: this\n    }, \"Provider System\"), this.props.systems ? this.props.systems.map((item, i) => {\n      return React.createElement(\"option\", {\n        key: i,\n        value: item.name,\n        id: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 681\n        },\n        __self: this\n      }, item.name);\n    }) : \"\")), React.createElement(\"li\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 689\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"select\",\n      name: \"consumedService\",\n      id: \"exampleSelect\",\n      onChange: this.handleReferenceChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 690\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 696\n      },\n      __self: this\n    }, \"Service\"), this.state.servicesList ? this.state.servicesList.map((item, i) => {\n      return React.createElement(\"option\", {\n        key: i,\n        value: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 700\n        },\n        __self: this\n      }, item.name);\n    }) : \"\")), React.createElement(\"li\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 708\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"link-btn modal-top-btn m-l-15\",\n      onClick: this.createReference.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 709\n      },\n      __self: this\n    }, \"Done\")))))));\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getFlowDetails: (modelId, flowId) => {\n      dispatch(fetchFlowDetils(modelId, flowId));\n    },\n    getSystems: modelId => {\n      dispatch(fetchModel(modelId));\n    }\n  };\n}\n\nfunction mapStateToProps(state) {\n  return {\n    activeSystem: state.model.activeSystem,\n    activeFlow: state.system.activeFlow,\n    activeModel: state.model.modelUri,\n    flowDetails: state.system.flowDetails,\n    invocations: state.system.invocations,\n    activeModelId: state.model.modelId,\n    type: state.system.type,\n    systems: state.model.items\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FlowDetails);","map":{"version":3,"sources":["/Users/kirancorreya/Site/Starlify/src/pages/dashboard/browsers/FlowDetails.js"],"names":["React","Component","fetchFlowDetils","connect","Modal","ModalBody","FormGroup","Input","Select","sequence","fetchModel","SortableContainer","SortableElement","arrayMove","SortableItem","value","consumerSystem","providerSystem","consumedService","SortableList","items","map","index","FlowDetails","constructor","props","onSortEnd","oldIndex","newIndex","setState","data","sortInvocation","state","formData","name","description","supportLevel","custom","documentationUrl","filterOptions","invocations","referenceData","consumerSystemId","consumedServiceId","servicesList","referenceAdd","close","bind","toggleDescription","modalToggle","componentDidUpdate","type","flowDetails","displayInvocation","serviceName","serviceId","sort","a","b","invocation","_links","filter","links","rel","reference","systems","system","references","systemReference","id","params","i","link","serviceData","title","fetch","process","env","REACT_APP_API","uri","method","headers","then","response","json","responseJson","prevState","handleUrlChange","event","target","handleChange","handleReferenceChange","selectedIndex","text","toggleAddReference","prev","updateFlow","activeModel","activeFlow","body","JSON","stringify","deletedSourceSystems","length","deleteSourceSystems","deletedTargetSystems","deleteTargetSystems","addSourceSystems","addTargetSystems","modal","setTimeout","getFlowDetails","activeModelId","catch","error","console","log","sourceSystems","targetSystems","handleSourceChange","option","difference","x","includes","push","handleTargetChange","collapse","e","source","label","getSystems","res","getSystemServices","parents","parent","services","createReference","referenceJson","invocationJson","invocationId","render","check","edit","addCircle","item","mapDispatchToProps","dispatch","modelId","flowId","mapStateToProps","activeSystem","model","modelUri"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { fetchFlowDetils } from \"../../../store/system/systemActions\";\nimport { connect } from \"react-redux\";\nimport { Modal, ModalBody, FormGroup, Input } from \"reactstrap\";\nimport Select from \"react-select\";\nimport check from \"../../../_assets/icons/icons/check-icon.svg\";\nimport addCircle from \"../../../_assets/icons/icons/add-icon-circle.svg\";\nimport sequence from \"../../../_assets/images/Sequence-diagram.png\";\nimport edit from \"../../../_assets/icons/icons/edit.svg\";\nimport { fetchModel } from '../../../store/model/modelActions'\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport arrayMove from 'array-move';\n\n//invocation listing - sorting module \nconst SortableItem = SortableElement(({ value }) =>\n  <li >\n    <ul className=\"row body\">\n      <li className=\"col-md-1\">\n        <i className=\"fas fa-bars\"></i>\n      </li>\n      <li className=\"col-md-4 text-white\">\n        {value.consumerSystem}\n      </li>\n      <li className=\"col-md-3 text-white\">\n        {value.providerSystem}\n      </li>\n      <li className=\"col-md-3 text-white word-wrap\">\n        {value.consumedService}\n      </li>\n      <li className=\"col-md-1 text-white\">\n        <i\n          className=\"fas fa-trash-alt\"\n        ></i>\n      </li>\n    </ul>\n  </li>\n);\n\n//invocation listing - sorting module \nconst SortableList = SortableContainer(({ items }) => {\n  return (\n    <ul>\n      {items.map((value, index) => (\n        <SortableItem key={`item-${index}`} index={index} value={value} />\n      ))}\n    </ul>\n  );\n});\n\n//Flow Details\nclass FlowDetails extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formData: {\n        name: \"\",\n        description: \"\",\n        supportLevel: \"\",\n        custom: { documentationUrl: \"\" }\n      },\n      filterOptions: [],\n      invocations: [],\n      referenceData: {\n        consumerSystem: \"\",\n        consumerSystemId: \"\",\n        consumedService: \"\",\n        consumedServiceId: \"\",\n        providerSystem: \"\",\n      },\n      servicesList: \"\",\n      data: [],\n      referenceAdd: false,\n    };\n\n    this.close = this.close.bind(this);\n    this.toggleDescription = this.toggleDescription.bind(this);\n    this.modalToggle = this.modalToggle.bind(this);\n  }\n\n  componentDidUpdate() {\n    if (this.props.type === 'FETCH_FLOW_DETAILS_SUCCESS' && this.props.flowDetails.invocations !== this.state.invocations) {\n      this.setState({ 'invocations': this.props.flowDetails.invocations })\n      this.displayInvocation()\n    }\n  }\n\n  //display invocation list\n  displayInvocation() {\n    this.setState({ 'data': [] })\n    var serviceName, serviceId\n    this.props.flowDetails.invocations\n      .sort((a, b) => a.index - b.index)\n      .map(invocation => {\n        invocation._links\n          .filter(links => links.rel === \"THROUGH\")\n          .map(reference => {\n            this.props.systems.map((system) => {\n              system.references\n                .filter(systemReference => systemReference.id === reference.params.id)\n                .map((referenceData, i) => {\n                  referenceData._links\n                    .filter(link => link.rel === 'TO')\n                    .map((serviceData, i) => {\n                      serviceName = serviceData.title\n                      serviceId = serviceData.params.id\n                      fetch(\n                        process.env.REACT_APP_API +\n                        serviceData.uri,\n                        {\n                          method: \"GET\",\n                          headers: {\n                            \"Content-Type\": \"application/json\"\n                          }\n                        }\n                      ).then(response => response.json())\n                        .then(responseJson => {\n                          referenceData._links\n                            .filter(link => link.rel === 'OF')\n                            .map((consumerSystem, i) => {\n                              this.setState(prevState => ({\n                                data: [...prevState.data, {\n                                  'id': invocation.index, 'invocationId': invocation.id, 'referenceId': referenceData.id, 'refrenceName': referenceData.name, 'consumedServiceId': serviceId,\n                                  'consumedService': serviceName, 'consumerSystem': consumerSystem.title, 'consumerSystemId': consumerSystem.params.id, 'providerSystem': responseJson._links[0].title, 'providerSystemId': responseJson._links[0].params.id, 'type': 'existing'\n                                }]\n                              }))\n\n                            })\n                        });\n\n                    })\n                })\n            })\n          });\n      });\n  }\n\n  //handling change of documentation url as custom attribute\n  handleUrlChange(event) {\n    const { formData } = this.state;\n    formData[event.target.name] = { documentationUrl: event.target.value };\n    this.setState({\n      formData\n    });\n  }\n\n  //handling change of flow basic attributes\n  handleChange(event) {\n    const { formData } = this.state;\n    formData[event.target.name] = event.target.value;\n    this.setState({\n      formData\n    });\n  }\n\n  //handling change of refrence attributes\n  handleReferenceChange(event) {\n    var index = event.target.selectedIndex;\n    const { referenceData } = this.state;\n    referenceData[event.target.name] = event.target[index].text;\n    this.setState({\n      referenceData\n    });\n    referenceData[event.target.name + 'Id'] = event.target.value;\n  }\n\n  //show or hide add refrence settings\n  toggleAddReference(event) {\n    this.setState(prev => ({\n      referenceAdd: !prev.referenceAdd,\n    }));\n  }\n\n  //update flow\n  updateFlow() {\n    fetch(\n      process.env.REACT_APP_API + `${this.props.activeModel}/flow/` + this.props.activeFlow,\n      {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(this.state.formData)\n      }\n    )\n      .then(response => {\n        if (this.state.deletedSourceSystems.length > 0)\n          this.deleteSourceSystems();\n        if (this.state.deletedTargetSystems.length > 0)\n          this.deleteTargetSystems();\n        this.addSourceSystems();\n        this.addTargetSystems();\n        this.setState(prevState => ({\n          modal: !prevState.modal\n        }));\n        \n        setTimeout( () => {\n          this.props.getFlowDetails(this.props.activeModelId, this.props.activeFlow);\n      }, 2000);\n        \n      })\n      .catch(error => console.log(error));\n  }\n\n  //add source systems\n  addSourceSystems() {\n    this.state.sourceSystems.map((system) => {\n      fetch(\n        process.env.REACT_APP_API + \"/hypermedia/network/\" + this.props.activeModelId + \"/flow/\" + this.props.activeFlow + \"/source/\" + system.value,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      )\n        .then(response => { })\n        .catch(error => console.log(error));\n      return true;\n    });\n  }\n\n  //add target systems\n  addTargetSystems() {\n    this.state.targetSystems.map((system) => {\n      fetch(\n        process.env.REACT_APP_API + \"/hypermedia/network/\" + this.props.activeModelId + \"/flow/\" + this.props.activeFlow + \"/target/\" + system.value,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      )\n        .then(response => { })\n        .catch(error => console.log(error));\n      return true;\n    });\n  }\n\n  //delete source systems\n  deleteSourceSystems() {\n    this.state.deletedSourceSystems.map((system) => {\n      fetch(\n        process.env.REACT_APP_API + \"/hypermedia/network/\" + this.props.activeModelId + \"/flow/\" + this.props.activeFlow + \"/source/\" + system.value,\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      )\n        .then(response => { })\n        .catch(error => console.log(error));\n      return true;\n    });\n  }\n\n  //delete target systems\n  deleteTargetSystems() {\n    this.state.deletedTargetSystems.map((system) => {\n      fetch(\n        process.env.REACT_APP_API + \"/hypermedia/network/\" + this.props.activeModelId + \"/flow/\" + this.props.activeFlow + \"/target/\" + system.value,\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      )\n        .then(response => { })\n        .catch(error => console.log(error));\n      return true;\n    });\n  }\n\n  //handle change of source systems\n  handleSourceChange(option, event) {\n    let difference = this.state.sourceSystems.filter(x => !option.includes(x));\n    if (difference.length > 0) {\n      this.state.deletedSourceSystems.push(difference[0]);\n    }\n    this.setState(state => {\n      return {\n        sourceSystems: option\n      };\n    });\n  }\n\n  //handle change of target systems\n  handleTargetChange(option) {\n    let difference = this.state.targetSystems.filter(x => !option.includes(x));\n    if (difference.length > 0) {\n      this.state.deletedTargetSystems.push(difference[0]);\n    }\n    this.setState(state => {\n      return {\n        targetSystems: option\n      };\n    });\n  }\n\n  //show or hide description\n  toggleDescription() {\n    this.setState(state => ({ collapse: !state.collapse }));\n  }\n\n  //closes the flow detail window\n  close(type) {\n    this.props.close(type);\n  }\n\n  //show or hide flow full edit pop up\n  modalToggle(e, data) {\n    this.state.sourceSystems = [];\n    this.state.targetSystems = [];\n    this.state.deletedSourceSystems = [];\n    this.state.deletedTargetSystems = [];\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n\n    this.props.flowDetails._links\n      .filter(links => links.rel === \"SOURCE\")\n      .map(source => {\n        this.state.sourceSystems.push({\n          value: source.params.id,\n          label: source.title\n        });\n        return true\n      });\n\n    this.props.flowDetails._links\n      .filter(links => links.rel === \"TARGET\")\n      .map(target => {\n        this.state.targetSystems.push({\n          value: target.params.id,\n          label: target.title\n        });\n        return true\n      })\n\n    this.setState({\n      formData: {\n        name: this.props.flowDetails.name,\n        description: this.props.flowDetails.description,\n        supportLevel: this.props.flowDetails.supportLevel,\n        custom: {\n          documentationUrl: this.props.flowDetails.custom.documentationUrl\n        }\n      }\n    });\n    this.getSystems();\n  }\n\n  getSystems() {\n    return fetch(\n      process.env.REACT_APP_API +\n      \"/hypermedia/network/\" +\n      this.props.activeModelId +\n      \"/allsystems\"\n    )\n      .then(res => res.json())\n      .then(response => {\n        this.setState({ systems: response });\n        response.map((systems, i) => {\n          this.state.filterOptions.push({\n            value: systems.id,\n            label: systems.name\n          });\n        });\n        return true\n      })\n      .catch(error => console.log(error));\n  }\n\n  getSystemServices(event) {\n    let parents = this.props.systems;\n    let parent = parents.filter(parent => parent.name === event.target.value);\n    if (parent) this.setState({ servicesList: parent[0].services });\n    var index = event.target.selectedIndex;\n    const { referenceData } = this.state;\n    referenceData[event.target.name] = event.target[index].text;\n    this.setState({\n      referenceData\n    });\n    referenceData[event.target.name + 'Id'] = event.target.value;\n  }\n\n  //create reference and invocation\n  createReference(event) {\n    /*this.setState(prevState => ({\n      data: [...prevState.data, {'invocationId' : '','referenceId' : '', 'refrenceName' :  '', 'consumedServiceId' : this.state.referenceData.consumedServiceId, \n      'consumedService' : this.state.referenceData.consumedService, 'consumerSystem' : this.state.referenceData.consumerSystem, 'consumerSystemId' : this.state.referenceData.consumerSystemId, 'providerSystem': this.state.referenceData.providerSystem, 'providerSystemId' :this.state.referenceData.providerSystemId, 'type' : 'new'}]\n    }))*/\n\n    fetch(\n      process.env.REACT_APP_API +\n      `/hypermedia/network/${this.props.activeModelId}/system/${this.state.referenceData.consumerSystemId}/reference/service/${this.state.referenceData.consumedServiceId}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }\n    )\n      .then(response => response.json())\n      .then(referenceJson => {\n        this.props.getSystems(this.props.activeModelId)\n        fetch(\n          process.env.REACT_APP_API +\n          `/model/${this.props.activeModelId}/service/${this.props.activeFlow}/invocation/` +\n          referenceJson.id,\n          {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" }\n          }\n        )\n          .then(response => response.json())\n          .then(invocationJson => {\n            this.props.getFlowDetails(\n              this.props.activeModelId,\n              this.props.activeFlow\n            );\n            this.toggleAddReference()\n          })\n          .catch(error => console.log(error));\n      });\n  }\n\n  //sort the invocation list\n  sortInvocation() {\n    console.log(this.state.data)\n    this.state.data.map((reference, index) => {\n      fetch(\n        process.env.REACT_APP_API +\n        `/hypermedia/network/${this.props.activeModelId}/flow/${this.props.activeFlow}/invocation/` + reference.invocationId,\n        {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ 'index': index })\n        }\n      )\n        .then(response => {\n          return true\n        })\n        .catch(error => console.log(error));\n    })\n    this.props.getFlowDetails(this.props.activeModel, this.props.activeFlow);\n  }\n\n  //handling sort event of the invocation list\n  onSortEnd = ({ oldIndex, newIndex }) => {\n    this.setState(({ data }) => ({\n      data: arrayMove(data, oldIndex, newIndex),\n    }), () => {\n      this.sortInvocation()\n    });\n    this.sortInvocation()\n  };\n\n  render() {\n    var { formData } = this.state;\n    return (\n      <div className=\"browser\">\n        <Modal isOpen={this.state.modal} toggle={this.modalToggle}>\n          <ModalBody>\n            <div className=\"editFlow\">\n              <h3 className=\"d-inline-block modal-title\">Edit Flow Details</h3>\n              <button\n                className=\"btn grey-btn modal-top-btn\"\n                onClick={this.updateFlow.bind(this)}\n              >\n                Done <img src={check} alt=\"\" />\n              </button>\n              <div className=\"ModalInput m-t-50\">\n                <h4>Flow name</h4>\n                <input\n                  type=\"text\"\n                  value={formData.name}\n                  name=\"name\"\n                  onChange={this.handleChange.bind(this)}\n                />\n              </div>\n              <div className=\"ModalInput\">\n                <FormGroup>\n                  <Input\n                    className=\"select-css\"\n                    type=\"select\"\n                    name=\"supportLevel\"\n                    value={formData.supportLevel}\n                    onChange={this.handleChange.bind(this)}\n                  >\n                    <option value=\"\">Support Level</option>\n                    <option value=\"1\">Gold</option>\n                    <option value=\"2\">Platinum</option>\n                    <option value=\"3\">Silver</option>\n                    ))}\n                  </Input>\n                </FormGroup>\n              </div>\n              <div className=\"ModalInput\">\n                <h4>Documentation URL</h4>\n                <input\n                  type=\"text\"\n                  name=\"custom\"\n                  value={formData.custom.documentationUrl}\n                  onChange={this.handleUrlChange.bind(this)}\n                />\n              </div>\n              <div className=\"ModalInput\">\n                <h4>Description</h4>\n                <textarea\n                  type=\"text\"\n                  name=\"description\"\n                  value={formData.description}\n                  onChange={this.handleChange.bind(this)}\n                />\n              </div>\n              <div className=\"ModalInput\">\n                <h4>Source system</h4>\n                <div className=\"searchbar\">\n                  <div sm=\"12\">\n                    <Select\n                      name=\"filters\"\n                      placeholder=\"\"\n                      value={this.state.sourceSystems}\n                      options={this.state.filterOptions}\n                      onChange={this.handleSourceChange.bind(this)}\n                      multi\n                      clearable={false}\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className=\"ModalInput\">\n                <h4>Target system</h4>\n                <div className=\"searchbar\">\n                  <div sm=\"12\">\n                    <Select\n                      name=\"filters\"\n                      placeholder=\"\"\n                      value={this.state.targetSystems}\n                      options={this.state.filterOptions}\n                      onChange={this.handleTargetChange.bind(this)}\n                      multi\n                      clearable={false}\n                    />\n                  </div>\n                </div>\n              </div>\n\n            </div>\n          </ModalBody>\n        </Modal>\n\n        <div className=\"browser_header text-white\">\n          <div>\n            <span className=\"icon icon-Share submenu-icon\" />\n            <h3 className=\"d-inline-block\">Flow Details</h3>\n            <img\n              src={edit}\n              alt=\"starlify\"\n              className=\"edit\"\n              onClick={() => this.modalToggle(this, this.props.flowDetails)}\n            />\n            <i\n              className=\"fas fa-times system-down-icon browser_close\"\n              onClick={() => this.close(\"flowDetail\")}\n            />\n          </div>\n        </div>\n        <div className=\"browser_wrapper browser_body\">\n          <div className=\"name m-b-20\">\n            <p className=\"text-grey\">Name</p>\n            <p className=\"text-white\">{this.props.flowDetails.name}</p>\n          </div>\n          <div className=\"support m-b-20\">\n            <p className=\"text-grey\">Support level</p>\n            {this.props.flowDetails.supportLevel === 1 && (\n              <p className=\"text-white\">Gold</p>\n            )}\n            {this.props.flowDetails.supportLevel === 2 && (\n              <p className=\"text-white\">Platinum</p>\n            )}\n            {this.props.flowDetails.supportLevel === 3 && (\n              <p className=\"text-white\">Silver</p>\n            )}\n          </div>\n          <div className=\"url m-b-20\">\n            <p className=\"text-grey\">Documentation URL</p>\n            <p className=\"text-white\">\n              {this.props.flowDetails.custom\n                ? this.props.flowDetails.custom.documentationUrl\n                : \"\"}\n            </p>\n          </div>\n          <div className=\"desc m-b-20\">\n            <p className=\"text-grey\">Description</p>\n            <p className=\"text-white\">{this.props.flowDetails.description}</p>\n          </div>\n          <div className=\"system m-b-20\">\n            <p className=\"text-grey\">Source</p>\n            {this.props.flowDetails._links\n              ? this.props.flowDetails._links\n                .filter(links => links.rel === \"SOURCE\")\n                .map((source, index) => {\n                  return <p key={index} className=\"text-white\">{source.title}</p>;\n                })\n              : \"\"}\n          </div>\n          <div className=\"target m-b-20\">\n            <p className=\"text-grey\">Target</p>\n            {this.props.flowDetails._links\n              ? this.props.flowDetails._links\n                .filter(links => links.rel === \"TARGET\")\n                .map((target, index) => {\n                  return <p key={index} className=\"text-white\">{target.title}</p>;\n                })\n              : \"\"}\n          </div>\n          <div className=\"technical row\">\n            <div className=\"technical-header col-md-12\">\n              <span className=\"text-grey\">Technical</span>\n              {!this.state.referenceAdd && (\n                <div className=\"addModal\">\n                  <span onClick={this.toggleAddReference.bind(this)}>\n                    <img src={addCircle} alt=\"starlify\" />\n                    Add Refrence\n                    </span>\n                </div>\n              )}\n            </div>\n            <div className=\"technical-body col-md-12\">\n              <ul className=\"row head\">\n                <li className=\"col-md-1\"></li>\n                <li className=\"col-md-4\">Consumer</li>\n                <li className=\"col-md-3\">Provider</li>\n                <li className=\"col-md-3\">Service</li>\n                <li className=\"col-md-1\"></li>\n              </ul>\n\n              <SortableList items={this.state.data} onSortEnd={this.onSortEnd} />\n              <div className=\"sequence\">\n                <img\n                  src={sequence}\n                  alt=\"starlify\"\n                  className=\"d-block mx-auto\"\n                />\n              </div>\n            </div>\n            {this.state.referenceAdd && (\n              <div className=\"d-block mx-auto\">\n                <ul className=\"d-flex formGroupWrapper justify-content-md-center create-ref\">\n                  <li className=\"form-group\">\n                    <Input\n                      type=\"select\"\n                      name=\"consumerSystem\"\n                      onChange={this.handleReferenceChange.bind(this)}\n                      className=\"p-l-0\"\n                    >\n                      <option>Consumer System</option>\n                      {this.props.systems\n                        ? this.props.systems.map((item, i) => {\n                          return (\n                            <option key={i} value={item.id} id={item.id}>\n                              {item.name}\n                            </option>\n                          );\n                        })\n                        : \"\"}\n                    </Input>\n                  </li>\n                  <li className=\"form-group\">\n                    <Input\n                      type=\"select\"\n                      name=\"providerSystem\"\n                      onChange={this.getSystemServices.bind(this)}\n                    >\n                      <option>Provider System</option>\n                      {this.props.systems\n                        ? this.props.systems.map((item, i) => {\n                          return (\n                            <option key={i} value={item.name} id={item.id}>\n                              {item.name}\n                            </option>\n                          );\n                        })\n                        : \"\"}\n                    </Input>\n                  </li>\n                  <li className=\"form-group\">\n                    <Input\n                      type=\"select\"\n                      name=\"consumedService\"\n                      id=\"exampleSelect\"\n                      onChange={this.handleReferenceChange.bind(this)}\n                    >\n                      <option>Service</option>\n                      {this.state.servicesList\n                        ? this.state.servicesList.map((item, i) => {\n                          return (\n                            <option key={i} value={item.id}>\n                              {item.name}\n                            </option>\n                          );\n                        })\n                        : \"\"}\n                    </Input>\n                  </li>\n                  <li className=\"form-group\">\n                    <button\n                      className=\"link-btn modal-top-btn m-l-15\"\n                      onClick={this.createReference.bind(this)}\n                    >\n                      Done\n                      </button>\n                  </li>\n                </ul>\n              </div>)}\n          </div>\n\n\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getFlowDetails: (modelId, flowId) => {\n      dispatch(fetchFlowDetils(modelId, flowId));\n    },\n    getSystems: (modelId) => {\n      dispatch(fetchModel(modelId));\n    },\n  };\n}\n\nfunction mapStateToProps(state) {\n  return {\n    activeSystem: state.model.activeSystem,\n    activeFlow: state.system.activeFlow,\n    activeModel: state.model.modelUri,\n    flowDetails: state.system.flowDetails,\n    invocations: state.system.invocations,\n    activeModelId: state.model.modelId,\n    type: state.system.type,\n    systems: state.model.items,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(FlowDetails);\n"]},"metadata":{},"sourceType":"module"}