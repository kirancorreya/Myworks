{"ast":null,"code":"var _jsxFileName = \"/Users/kirancorreya/Site/Starlify/src/pages/dashboard/graph/Graph.js\";\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport \"../../../_assets/css/Graph.css\";\n\nclass Graph extends Component {\n  async componentDidMount() {\n    let sysJson = [];\n    await fetch(\"https://000int-prd-payara2.private.entiros.io:8181/starlify/resources/model/2d0a2236-3083-4572-ad7b-a8d2ea94c18c\") // Open Model\n    .then(res => res.json()).then(result => {\n      sysJson = result.systems;\n    }, error => {\n      console.log(error);\n    });\n    const width = window.innerWidth,\n          height = window.innerHeight - 100;\n    var i = 0;\n    var items = [];\n    items[\"nodes\"] = [];\n    items[\"links\"] = [];\n    sysJson.forEach(function (data) {\n      var source = i;\n      items[\"nodes\"][i] = {\n        \"name\": data.name || \"System\",\n        \"type\": \"system\",\n        \"radius\": 25\n      };\n\n      if (data.services) {\n        data.services.forEach(function (service) {\n          var target = ++i;\n          items[\"nodes\"][target] = {\n            name: service.name || \"Service\",\n            \"type\": \"service\",\n            \"radius\": 8\n          };\n          items[\"links\"].push({\n            \"source\": source,\n            \"target\": target\n          });\n        });\n      }\n\n      if (data.references) {\n        data.references.forEach(function (reference) {\n          var point = ++i;\n          items[\"nodes\"][point] = {\n            name: reference.name || \"Reference\",\n            \"type\": \"reference\",\n            \"radius\": 1\n          };\n          items[\"links\"].push({\n            \"source\": source,\n            \"target\": point\n          });\n        });\n      }\n\n      i++;\n    });\n    const zoom = d3.zoom().scaleExtent([0.5, 15]).on(\"zoom\", zoomed);\n    var svg = d3.select(\".forcegraph\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).call(zoom).append(\"g\").attr(\"transform\", \"translate(0,0)\");\n    var simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d, i) {\n      return i;\n    }).distance(50)).force(\"charge\", d3.forceManyBody().strength(-250)).force('gravity', d3.forceRadial(0, 0)).force(\"center\", d3.forceCenter(width / 2, height / 2));\n    var links = svg.selectAll(\".link\").data(items.links).enter().append(\"line\").attr(\"class\", \"link\");\n    var nodes = svg.selectAll(\".node\").data(items.nodes).enter().append(\"g\").attr(\"class\", \"node\").call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended));\n    var circle = nodes.append(\"circle\");\n    var label = nodes.append(\"text\").attr(\"dy\", \".35em\").text(function (d) {\n      return d.name;\n    });\n    simulation.nodes(items.nodes).on(\"tick\", tick);\n    simulation.force(\"link\").links(items.links);\n\n    function tick() {\n      links.attr(\"x1\", function (d) {\n        return d.source.x;\n      }).attr(\"y1\", function (d) {\n        return d.source.y;\n      }).attr(\"x2\", function (d) {\n        return d.target.x;\n      }).attr(\"y2\", function (d) {\n        return d.target.y;\n      });\n      circle.attr(\"cx\", function (d) {\n        return d.x;\n      }).attr(\"cy\", function (d) {\n        return d.y;\n      }).attr(\"r\", weightRadius);\n      label.attr(\"x\", function (d) {\n        return d.x + 8;\n      }).attr(\"y\", function (d) {\n        return d.y;\n      });\n    }\n\n    function weightRadius(d) {\n      var r = d.radius;\n      return r;\n    }\n\n    function zoomed() {\n      svg.attr('transform', 'translate(' + d3.event.transform.x + ',' + d3.event.transform.y + ') scale(' + d3.event.transform.k + ')');\n    }\n\n    function dragstarted(d) {\n      if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"forcegraph\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["/Users/kirancorreya/Site/Starlify/src/pages/dashboard/graph/Graph.js"],"names":["React","Component","d3","Graph","componentDidMount","sysJson","fetch","then","res","json","result","systems","error","console","log","width","window","innerWidth","height","innerHeight","i","items","forEach","data","source","name","services","service","target","push","references","reference","point","zoom","scaleExtent","on","zoomed","svg","select","append","attr","call","simulation","forceSimulation","force","forceLink","id","d","distance","forceManyBody","strength","forceRadial","forceCenter","links","selectAll","enter","nodes","drag","dragstarted","dragged","dragended","circle","label","text","tick","x","y","weightRadius","r","radius","event","transform","k","active","alphaTarget","restart","fx","fy","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3';\n\nimport \"../../../_assets/css/Graph.css\";\n\nclass Graph extends Component {\n\n  async componentDidMount(){\n\n    let sysJson = [];\n\n    await fetch(\"https://000int-prd-payara2.private.entiros.io:8181/starlify/resources/model/2d0a2236-3083-4572-ad7b-a8d2ea94c18c\") // Open Model\n    .then(res => res.json())\n    .then((result) => {\n      sysJson = result.systems;\n    }, (error) => {\n      console.log(error);\n    })\n    \n    const width = window.innerWidth,\n        height = window.innerHeight - 100;\n\n    var i = 0;\n    var items = [];\n    items[\"nodes\"] = [];\n    items[\"links\"] = [];\n    sysJson.forEach(function(data) {\n      var source = i;\n      items[\"nodes\"][i] = { \"name\": data.name  || \"System\", \"type\": \"system\", \"radius\": 25 };\n      if (data.services){\n        data.services.forEach(function(service){\n          var target = ++i;\n          items[\"nodes\"][target] = { name: service.name || \"Service\", \"type\": \"service\", \"radius\": 8 };\n          items[\"links\"].push({\"source\": source, \"target\": target});\n        })\n      }\n\n      if (data.references){\n        data.references.forEach(function(reference){\n          var point = ++i;\n          items[\"nodes\"][point] = { name: reference.name || \"Reference\", \"type\": \"reference\", \"radius\": 1 };\n          items[\"links\"].push({\"source\": source, \"target\": point});\n        })\n      }\n\n      i++;\n    });\n    \n        \n    const zoom = d3.zoom()\n                .scaleExtent([0.5, 15])\n                .on(\"zoom\", zoomed);\n\n    var svg = d3.select(\".forcegraph\").append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .call(zoom)\n        .append(\"g\")\n        .attr(\"transform\", \"translate(0,0)\");\n\n    var simulation = d3.forceSimulation()\n      .force(\"link\", d3.forceLink().id(function(d,i) {\n        return i;\n      }).distance(50))\n      .force(\"charge\", d3.forceManyBody().strength(-250 ))\n      .force('gravity', d3.forceRadial(0, 0))\n      .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n    var links = svg.selectAll(\".link\")\n      .data(items.links)\n      .enter().append(\"line\")\n      .attr(\"class\", \"link\");\n\n    var nodes = svg.selectAll(\".node\")\n      .data(items.nodes)\n      .enter().append(\"g\")\n      .attr(\"class\", \"node\")\n      .call(d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended)\n      );\n\n    var circle = nodes.append(\"circle\");\n\n    var label = nodes.append(\"text\")\n      .attr(\"dy\", \".35em\")\n      .text(function(d) { return d.name; });\n\n    simulation\n      .nodes(items.nodes)\n      .on(\"tick\", tick);\n\n    simulation\n      .force(\"link\")\n      .links(items.links);\n\n    function tick() {\n      links\n        .attr(\"x1\", function (d) { return d.source.x; })\n        .attr(\"y1\", function (d) { return d.source.y; })\n        .attr(\"x2\", function (d) { return d.target.x; })\n        .attr(\"y2\", function (d) { return d.target.y; });\n\n      circle\n        .attr(\"cx\", function(d) { return d.x; })\n        .attr(\"cy\", function(d) { return d.y; })\n        .attr(\"r\", weightRadius);\n\n      label\n        .attr(\"x\", function(d) { return d.x + 8; })\n        .attr(\"y\", function(d) { return d.y; });\n    }\n\n    function weightRadius(d) {\n      var r = d.radius;\n      return r;\n    }\n\n    function zoomed() {\n        svg.attr('transform', 'translate(' + d3.event.transform.x + ',' + d3.event.transform.y + ') scale(' + d3.event.transform.k + ')');\n    }\n\n    function dragstarted(d) {\n        if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n    }\n\n    function dragged(d) {\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n        if (!d3.event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n    }\n\n  }\n\n  render() {\n    return (\n      <div className=\"forcegraph\"></div>\n    )\n  }\n}\n\nexport default Graph;\n"]},"metadata":{},"sourceType":"module"}