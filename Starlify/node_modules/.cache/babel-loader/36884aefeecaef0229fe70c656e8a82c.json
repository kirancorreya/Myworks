{"ast":null,"code":"var _jsxFileName = \"/Users/kirancorreya/Site/Starlify/src/pages/dashboard/browsers/SystemDetails.js\";\nimport React, { Component } from \"react\";\nimport VerticalScrollbars from \"../../../_assets/Scrollbars/VerticalScrollbars\";\nimport { Popover, PopoverBody, Collapse } from \"reactstrap\";\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from \"react-contextmenu\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport { fetchSystemDetils } from '../../../store/system/systemActions';\nimport { connect } from 'react-redux';\n\nfunction collect(props) {\n  return {\n    item: props.item\n  };\n}\n\nclass SystemDetails extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapse: true,\n      systemCollapseId: false,\n      subSystemCollapseId: false,\n      modal: false\n    };\n    this.close = this.close.bind(this);\n    this.toggleDescription = this.toggleDescription.bind(this);\n    this.toggleId = this.toggleId.bind(this);\n    this.modalToggle = this.modalToggle.bind(this);\n    this.updateSystemDetails = this.updateSystemDetails.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.getSystemDetails(this.props.activeModel, this.props.activeSystem);\n  }\n\n  updateSystemDetails(event) {\n    let value = event.target.value;\n\n    if ((event.key === 'Enter' || event.type === 'blur') && this.state.modal && value) {\n      event.target.value = '';\n      this.setState(prevState => ({\n        modal: !prevState.modal\n      }));\n      fetch(process.env.REACT_APP_API + \"\".concat(this.props.activeModel, \"/system/\") + this.props.details.id, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          description: value\n        })\n      }).then(response => {\n        this.props.getSystemDetails(this.props.activeModel, this.props.details.id);\n      });\n    }\n  }\n\n  toggleDescription() {\n    this.setState(state => ({\n      collapse: !state.collapse\n    }));\n  }\n\n  toggleId(type) {\n    switch (type) {\n      case \"system\":\n        return this.setState({\n          systemCollapseId: !this.state.systemCollapseId\n        });\n\n      case \"subsystem\":\n        return this.setState({\n          subSystemCollapseId: !this.state.subSystemCollapseId\n        });\n    }\n  } //Closes the system details section\n\n\n  close(menu, type) {\n    this.props.close(menu, type);\n  } //control right click modal\n\n\n  modalToggle(e, data) {\n    console.log(data);\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n\n    if (data) {\n      this.setState({\n        item: data.item\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"org_browser\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(ContextMenu, {\n      id: \"systemdetail_right_click\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(MenuItem, {\n      data: {\n        itemType: 'rename'\n      },\n      onClick: this.modalToggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Update\")), React.createElement(Modal, {\n      isOpen: this.state.modal,\n      toggle: this.modalToggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      onBlur: this.updateSystemDetails.bind(this),\n      onKeyDown: this.updateSystemDetails.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.props.details.description)))), React.createElement(\"h3\", {\n      className: \"text-center text-white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"System Details\", React.createElement(\"i\", {\n      className: \"fas fa-times system-down-icon browser_close\",\n      onClick: () => this.close(\"systemDetail\", \"menuDetail\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })), React.createElement(VerticalScrollbars, {\n      autoHide: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"browser_wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"org-selector\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-white text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"ob-block row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6 m-b-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-white text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      id: \"systemPopoverId\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, this.props.details.name), React.createElement(\"i\", {\n      className: \"fas fa-chevron-down system-down-icon\",\n      onClick: this.toggleDescription,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    })), React.createElement(Popover, {\n      placement: \"bottom\",\n      isOpen: this.state.systemCollapseId,\n      target: \"systemPopoverId\",\n      toggle: this.toggleId.bind(this, 'system'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(PopoverBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, this.props.details.id))), React.createElement(\"div\", {\n      className: \"col-md-6 m-b-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-white text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Support lvl: Gold\")), React.createElement(Collapse, {\n      isOpen: this.state.collapse,\n      className: \"systemDetailsDisc\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(ContextMenuTrigger, {\n      id: \"systemdetail_right_click\",\n      item: this.props.details,\n      collect: collect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-grey\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, this.props.details.description ? this.props.details.description : 'No Description')))), React.createElement(\"div\", {\n      className: \"ob-block row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-white text-left col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Sub systems\"), this.props.details.subsystemLinks ? this.props.details.subsystemLinks.map((subsystem, i) => {\n      return React.createElement(\"div\", {\n        key: subsystem.id,\n        className: \"d-flex w-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-grey text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"systemCircle\",\n        id: \"PopoverSubSsytemId\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, subsystem.title)), React.createElement(Popover, {\n        placement: \"bottom\",\n        isOpen: this.state.subSystemCollapseId,\n        target: \"PopoverSubSsytemId\",\n        toggle: this.toggleId.bind(this, 'subsystem'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(PopoverBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, subsystem.id))));\n    }) : \"\"), React.createElement(\"div\", {\n      className: \"ob-block row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-white text-left col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Services\"), this.props.details.services ? this.props.details.services.map((services, i) => {\n      return React.createElement(\"div\", {\n        key: services.id,\n        className: \"d-flex w-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-grey text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"serviceCircle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), services.name)));\n    }) : \"\"), React.createElement(\"div\", {\n      className: \"ob-block row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"text-white text-left col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, \"References\"), this.props.details.references ? this.props.details.references.map((references, i) => {\n      return React.createElement(\"div\", {\n        className: \"d-flex w-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-grey text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"referenceArrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"\\u2192\"), references.name)));\n    }) : \"\"))));\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getSystemDetails: (modelId, systemId) => {\n      dispatch(fetchSystemDetils(modelId, systemId));\n    }\n  };\n}\n\nfunction mapStateToProps(state) {\n  return {\n    activeSystem: state.model.activeSystem,\n    activeModel: state.model.modelUri,\n    details: state.system.details\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SystemDetails);","map":{"version":3,"sources":["/Users/kirancorreya/Site/Starlify/src/pages/dashboard/browsers/SystemDetails.js"],"names":["React","Component","VerticalScrollbars","Popover","PopoverBody","Collapse","ContextMenu","MenuItem","ContextMenuTrigger","Modal","ModalBody","fetchSystemDetils","connect","collect","props","item","SystemDetails","constructor","state","collapse","systemCollapseId","subSystemCollapseId","modal","close","bind","toggleDescription","toggleId","modalToggle","updateSystemDetails","componentWillMount","getSystemDetails","activeModel","activeSystem","event","value","target","key","type","setState","prevState","fetch","process","env","REACT_APP_API","details","id","method","headers","body","JSON","stringify","description","then","response","menu","e","data","console","log","render","itemType","name","subsystemLinks","map","subsystem","i","title","services","references","mapDispatchToProps","dispatch","modelId","systemId","mapStateToProps","model","modelUri","system"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport VerticalScrollbars from \"../../../_assets/Scrollbars/VerticalScrollbars\";\nimport { Popover, PopoverBody, Collapse } from \"reactstrap\";\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from \"react-contextmenu\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport { fetchSystemDetils } from '../../../store/system/systemActions'\nimport { connect } from 'react-redux';\n\nfunction collect(props) {\n  return { item:props.item};\n}\n\nclass SystemDetails extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapse: true,\n      systemCollapseId: false,\n      subSystemCollapseId: false,\n      modal: false,\n    };\n    this.close = this.close.bind(this);\n    this.toggleDescription = this.toggleDescription.bind(this);\n    this.toggleId = this.toggleId.bind(this);\n    this.modalToggle = this.modalToggle.bind(this);\n    this.updateSystemDetails = this.updateSystemDetails.bind(this);\n  }\n  \n  componentWillMount() {\n    this.props.getSystemDetails(this.props.activeModel, this.props.activeSystem)\n  }\n\n  updateSystemDetails(event) {\n    let value = event.target.value;\n        if ((event.key === 'Enter' || event.type === 'blur') && this.state.modal && value) { \n            event.target.value = '';\n            this.setState(prevState => ({\n                modal: !prevState.modal\n            }));\n            fetch(\n                process.env.REACT_APP_API + `${this.props.activeModel}/system/` + this.props.details.id,\n                {\n                    method: \"PATCH\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({ description: value })\n                }\n            )\n            .then(response => {\n                this.props.getSystemDetails(this.props.activeModel, this.props.details.id)\n            }\n         )\n        }\n\n  }\n  \n  toggleDescription() {\n    this.setState(state => ({ collapse: !state.collapse }));\n  }\n\n  toggleId(type) {\n    switch (type) {\n      case \"system\":\n        return this.setState({\n          systemCollapseId: !this.state.systemCollapseId\n        });\n\n      case \"subsystem\":\n        return this.setState({\n          subSystemCollapseId: !this.state.subSystemCollapseId\n        });\n      }\n    \n  }\n\n  //Closes the system details section\n  close(menu, type) {\n    this.props.close(menu, type);\n  }\n\n  //control right click modal\n  modalToggle(e, data) {\n    console.log(data)\n    this.setState(prevState => ({\n        modal: !prevState.modal\n    }));\n\n    if (data) {\n        this.setState({\n            item: data.item,\n        })\n\n    }\n}\n\n  render() {\n    return (\n      <div className=\"org_browser\">\n        <ContextMenu id=\"systemdetail_right_click\">\n        <MenuItem data={{ itemType: 'rename' }} onClick={this.modalToggle}>\n          Update\n      </MenuItem>\n      </ContextMenu>\n      <Modal isOpen={this.state.modal} toggle={this.modalToggle} >\n                    <ModalBody>\n                            <div>\n                            <textarea onBlur={this.updateSystemDetails.bind(this)} onKeyDown={this.updateSystemDetails.bind(this)}>\n                            {this.props.details.description}\n                            </textarea>\n                            </div>\n                    </ModalBody>\n       </Modal>\n        <h3 className=\"text-center text-white\">\n          System Details\n          <i\n            className=\"fas fa-times system-down-icon browser_close\"\n            onClick={() => this.close(\"systemDetail\", \"menuDetail\")}\n          />\n        </h3>\n        <VerticalScrollbars autoHide>\n          <div className=\"browser_wrapper\">\n            <div className=\"org-selector\">\n              <p className=\"text-white text-left\">\n                {/* {this.state.systemDetails.name} */}\n              </p>\n            </div>\n            <div className=\"ob-block row\">\n              <div className=\"col-md-6 m-b-20\">\n                <p className=\"text-white text-left\">\n                  <span id=\"systemPopoverId\">{this.props.details.name}</span>\n\n                  <i\n                    className=\"fas fa-chevron-down system-down-icon\"\n                    onClick={this.toggleDescription}\n                  />\n                </p>\n                <Popover\n                  placement=\"bottom\"\n                  isOpen={this.state.systemCollapseId}\n                  target=\"systemPopoverId\"\n                  toggle={this.toggleId.bind(this, 'system')}\n                >\n                  {/* <PopoverHeader>Popover Title</PopoverHeader> */}\n                  <PopoverBody>{this.props.details.id}</PopoverBody>\n                </Popover>\n              </div>\n              <div className=\"col-md-6 m-b-20\">\n                <p className=\"text-white text-left\">Support lvl: Gold</p>\n              </div>\n              <Collapse\n                isOpen={this.state.collapse}\n                className=\"systemDetailsDisc\"\n              >\n                <ContextMenuTrigger id=\"systemdetail_right_click\" item={this.props.details} collect={collect}>\n                <p className=\"text-grey\">\n                {this.props.details.description ? this.props.details.description : 'No Description'}\n                </p>\n                </ContextMenuTrigger>\n              </Collapse>\n            </div>\n            {/* <div className=\"developer w-100 d-inline-block\">\n            <p className=\"text-white text-left\">Developer</p>\n            <ul className=\"text-left\">\n              <li className=\"developer-item\">\n                Name Surname <span className=\"developer-img\" />\n              </li>\n            </ul>\n          </div>\n          <div className=\"ob-block row\">\n            <p className=\"text-white text-left col-md-12\">Subsystem</p>\n            <div className=\"col-md-6\">\n              <p className=\"text-grey text-left\">\n                <img src={subsystem} alt=\"starlify\" className=\"m-r-15 m-b-5 \" />\n                System\n              </p>\n            </div>\n            <div className=\"col-md-6\">\n              <p className=\"text-grey text-left\">ID:039982397</p>\n            </div>\n          </div> */}\n          <div className=\"ob-block row\">\n              <p className=\"text-white text-left col-md-12\">Sub systems</p>\n              {this.props.details.subsystemLinks\n                ? this.props.details.subsystemLinks.map((subsystem, i) => {\n                    return (\n                      <div key={subsystem.id} className=\"d-flex w-100\">\n                        <div className=\"col-md-12\">\n                        \n                          <p className=\"text-grey text-left\">\n                          <span className=\"systemCircle\" id=\"PopoverSubSsytemId\">\n                            {subsystem.title}\n                          </span>\n                          </p>\n                          <Popover\n                  placement=\"bottom\"\n                  isOpen={this.state.subSystemCollapseId}\n                  target=\"PopoverSubSsytemId\"\n                  toggle={this.toggleId.bind(this, 'subsystem')}\n                >\n                  {/* <PopoverHeader>Popover Title</PopoverHeader> */}\n                  <PopoverBody>{subsystem.id}</PopoverBody>\n                </Popover>\n                          \n                        </div>\n                        \n                      </div>\n                    );\n                  })\n                : \"\"}\n            </div>\n            <div className=\"ob-block row\">\n              <p className=\"text-white text-left col-md-12\">Services</p>\n              {this.props.details.services\n                ? this.props.details.services.map((services, i) => {\n                    return (\n                      <div key={services.id} className=\"d-flex w-100\">\n                        <div className=\"col-md-12\">\n                          <p className=\"text-grey text-left\">\n                            <span className=\"serviceCircle\" />\n\n                            {services.name}\n                          </p>\n                          \n                        </div>\n                        \n                      </div>\n                    );\n                  })\n                : \"\"}\n            </div>\n            <div className=\"ob-block row\">\n              <p className=\"text-white text-left col-md-12\">References</p>\n              {this.props.details.references\n                ? this.props.details.references.map((references, i) => {\n                    return (\n                      <div className=\"d-flex w-100\">\n                        <div className=\"col-md-12\">\n                          <p className=\"text-grey text-left\">\n                            <span className=\"referenceArrow\">→</span>\n                            {references.name}\n                          </p>\n                        </div>\n                        {/* <div className=\"col-md-6\">\n                        <p className=\"text-grey text-left\">{references.id}</p>\n                      </div> */}\n                      </div>\n                    );\n                  })\n                : \"\"}\n            </div>\n          </div>\n        </VerticalScrollbars>\n      </div>\n    );\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getSystemDetails: (modelId, systemId) => {\n          dispatch(fetchSystemDetils(modelId, systemId));\n        }\n  }\n}\n\nfunction mapStateToProps(state){\n  return{\n    activeSystem: state.model.activeSystem,\n    activeModel: state.model.modelUri,\n    details: state.system.details,\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SystemDetails);"]},"metadata":{},"sourceType":"module"}