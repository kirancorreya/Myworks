{"ast":null,"code":"var _jsxFileName = \"/Users/kirancorreya/Site/Starlify/src/pages/dashboard/graph/Graph.js\";\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\n\nclass Graph extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.fetchSystems = () => {\n      var items = [];\n      items[\"nodes\"] = [];\n      items[\"links\"] = [];\n      fetch(\"https://000int-prd-payara2.private.entiros.io:8181/starlify/resources/model/2d0a2236-3083-4572-ad7b-a8d2ea94c18c\") // Open Model\n      .then(res => res.json()).then(result => {\n        var i = 0;\n        result.systems.forEach(function (data) {\n          var sysid = data.id;\n          items[\"nodes\"][i] = {\n            \"id\": sysid,\n            \"name\": data.name || \"System\",\n            \"type\": \"system\",\n            \"radius\": 15\n          };\n\n          if (data.services) {\n            data.services.forEach(function (service) {\n              var j = ++i;\n              items[\"nodes\"][j] = {\n                \"id\": service.id,\n                name: service.name || \"Service\",\n                \"type\": \"service\",\n                \"radius\": 5\n              };\n              items[\"links\"].push({\n                \"source\": sysid,\n                \"target\": service.id,\n                \"type\": \"service\"\n              });\n            });\n          }\n\n          if (data.references) {\n            data.references.forEach(function (reference) {\n              fetch(\"https://000int-prd-payara2.private.entiros.io:8181/starlify/resources/model/2d0a2236-3083-4572-ad7b-a8d2ea94c18c/reference/\" + reference.id).then(res => res.json()).then(result => {\n                items[\"links\"].push({\n                  \"source\": sysid,\n                  \"target\": result.service.id,\n                  \"type\": \"reference\"\n                });\n              }, error => {\n                return error;\n              });\n            });\n          }\n\n          i++;\n        });\n      }, error => {\n        return error;\n      });\n      return items;\n    };\n  }\n\n  componentWillMount() {\n    const items = this.fetchSystems();\n    new Promise(function (resolve, reject) {\n      setTimeout(() => {\n        resolve(items);\n      }, 5000);\n    }).then(function (items) {\n      const width = window.innerWidth,\n            height = window.innerHeight - 100;\n      const zoom = d3.zoom().scaleExtent([0.5, 6]).on(\"zoom\", zoomed);\n      var svg = d3.select(\".forcegraph\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).call(zoom).append(\"g\").attr(\"transform\", \"translate(0,0)\");\n      svg.append('defs').append('marker').attr('id', 'service').attr('viewBox', '-5 -5 20 20').attr('refX', 8).attr('refY', 0).attr('orient', 'auto').attr('markerWidth', 25).attr('markerHeight', 25).attr('xoverflow', 'visible').append('svg:path').attr('d', 'M -5 -2 L 0 0 L -5 2 z').attr('fill', '#fff').style('stroke', 'none');\n      var simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d, i) {\n        return d.id;\n      }).distance(function (d) {\n        return d.type === \"reference\" ? 200 : 10;\n      })).force(\"charge\", d3.forceManyBody().strength(-150)).force('gravity', d3.forceRadial(0, 0)).force('x', d3.forceX().strength(0.01)).force('y', d3.forceY().strength(0.01)).force('collide', d3.forceCollide(0)).force(\"center\", d3.forceCenter(width / 2, height / 2));\n      var links = svg.selectAll(\".link\").data(items.links).enter().append(\"line\").attr(\"class\", \"link\");\n      var nodes = svg.selectAll(\".node\").data(items.nodes).enter().append(\"g\").attr(\"class\", \"node\").call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended));\n      var circle = nodes.append(\"circle\");\n      var label = nodes.append(\"text\").attr(\"dy\", \".35em\").attr(\"class\", function (d) {\n        return d.type;\n      }).text(function (d) {\n        return d.name;\n      });\n      simulation.nodes(items.nodes).on(\"tick\", tick);\n      simulation.force(\"link\").links(items.links);\n\n      function tick() {\n        links.attr(\"x1\", function (d) {\n          return d.source.x;\n        }).attr(\"y1\", function (d) {\n          return d.source.y;\n        }).attr(\"x2\", function (d) {\n          return d.target.x;\n        }).attr(\"y2\", function (d) {\n          return d.target.y;\n        }).attr(\"marker-end\", function (d) {\n          return d.type === \"reference\" ? \"url(#service)\" : \"\";\n        });\n        circle.attr(\"cx\", function (d) {\n          return d.x;\n        }).attr(\"cy\", function (d) {\n          return d.y;\n        }).attr(\"class\", function (d) {\n          return d.type;\n        }).attr(\"r\", weightRadius);\n        label.attr(\"x\", function (d) {\n          return d.x;\n        }).attr(\"y\", function (d) {\n          return d.y;\n        });\n      }\n\n      function weightRadius(d) {\n        var r = d.radius;\n        return r;\n      }\n\n      function zoomed() {\n        svg.attr('transform', 'translate(' + d3.event.transform.x + ',' + d3.event.transform.y + ') scale(' + d3.event.transform.k + ')');\n      }\n\n      function dragstarted(d) {\n        if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      }\n\n      function dragged(d) {\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n      }\n\n      function dragended(d) {\n        if (!d3.event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"forcegraph\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["/Users/kirancorreya/Site/Starlify/src/pages/dashboard/graph/Graph.js"],"names":["React","Component","d3","Graph","fetchSystems","items","fetch","then","res","json","result","i","systems","forEach","data","sysid","id","name","services","service","j","push","references","reference","error","componentWillMount","Promise","resolve","reject","setTimeout","width","window","innerWidth","height","innerHeight","zoom","scaleExtent","on","zoomed","svg","select","append","attr","call","style","simulation","forceSimulation","force","forceLink","d","distance","type","forceManyBody","strength","forceRadial","forceX","forceY","forceCollide","forceCenter","links","selectAll","enter","nodes","drag","dragstarted","dragged","dragended","circle","label","text","tick","source","x","y","target","weightRadius","r","radius","event","transform","k","active","alphaTarget","restart","fx","fy","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3';\n\nclass Graph extends Component {\n\n  fetchSystems = () => {\n    var items = [];\n    items[\"nodes\"] = [];\n    items[\"links\"] = [];\n    \n    fetch(\"https://000int-prd-payara2.private.entiros.io:8181/starlify/resources/model/2d0a2236-3083-4572-ad7b-a8d2ea94c18c\") // Open Model\n    .then(res => res.json())\n    .then((result) => {\n\n      var i = 0;\n      result.systems.forEach(function(data) {\n        var sysid = data.id;\n        items[\"nodes\"][i] = { \"id\": sysid, \"name\": data.name  || \"System\", \"type\": \"system\", \"radius\": 15 };\n        if (data.services){\n          data.services.forEach(function(service){\n            var j = ++i;\n            items[\"nodes\"][j] = { \"id\": service.id, name: service.name || \"Service\", \"type\": \"service\", \"radius\": 5 };\n            items[\"links\"].push({\"source\": sysid, \"target\": service.id, \"type\": \"service\"});\n          })\n        }\n\n        if (data.references){\n          data.references.forEach(function(reference){\n            fetch(\"https://000int-prd-payara2.private.entiros.io:8181/starlify/resources/model/2d0a2236-3083-4572-ad7b-a8d2ea94c18c/reference/\"+reference.id)\n            .then(res => res.json())\n            .then((result) => {\n\n              items[\"links\"].push({\"source\": sysid, \"target\": result.service.id, \"type\": \"reference\"});\n            \n            }, (error) => {\n              return error;\n            })\n          })\n        }\n\n        i++;\n      });\n\n    }, (error) => {\n      return error;\n    })\n    return items;\n  }\n\n  componentWillMount(){\n\n    const items = this.fetchSystems(); \n\n    new Promise(function(resolve, reject) {\n\n      setTimeout(() => {\n        resolve(items);\n      }, 5000);\n    \n    }).then(function(items) {\n\n      const width = window.innerWidth,\n        height = window.innerHeight - 100;\n\n      const zoom = d3.zoom()\n                  .scaleExtent([0.5, 6])\n                  .on(\"zoom\", zoomed);\n\n      var svg = d3.select(\".forcegraph\").append(\"svg\")\n          .attr(\"width\", width)\n          .attr(\"height\", height)\n          .call(zoom)\n          .append(\"g\")\n          .attr(\"transform\", \"translate(0,0)\");\n\n        svg.append('defs').append('marker')\n          .attr('id', 'service')\n          .attr('viewBox', '-5 -5 20 20')\n          .attr('refX', 8)\n          .attr('refY', 0)\n          .attr('orient', 'auto')\n          .attr('markerWidth', 25)\n          .attr('markerHeight', 25)\n          .attr('xoverflow', 'visible')\n          .append('svg:path')\n          .attr('d', 'M -5 -2 L 0 0 L -5 2 z')\n          .attr('fill', '#fff')\n          .style('stroke','none');\n\n      var simulation = d3.forceSimulation()\n        .force(\"link\", d3.forceLink().id(function(d,i) {\n          return d.id;\n        })\n        .distance(function(d) {\n          return d.type === \"reference\" ? 200 : 10;\n        }))\n        .force(\"charge\", d3.forceManyBody().strength(-150 ))\n        .force('gravity', d3.forceRadial(0, 0))\n        .force('x', d3.forceX().strength(0.01))\n        .force('y', d3.forceY().strength(0.01))\n        .force('collide', d3.forceCollide(0))\n        .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n      var links = svg.selectAll(\".link\")\n        .data(items.links)\n        .enter().append(\"line\")\n        .attr(\"class\", \"link\");\n      \n      var nodes = svg.selectAll(\".node\")\n        .data(items.nodes)\n        .enter().append(\"g\")\n        .attr(\"class\", \"node\")\n        .call(d3.drag()\n          .on(\"start\", dragstarted)\n          .on(\"drag\", dragged)\n          .on(\"end\", dragended)\n        );\n\n      var circle = nodes.append(\"circle\");\n\n      var label = nodes.append(\"text\")\n        .attr(\"dy\", \".35em\")\n        .attr(\"class\", function(d) { return d.type; })\n        .text(function(d) { return d.name; });\n\n      simulation\n        .nodes(items.nodes)\n        .on(\"tick\", tick);\n\n      simulation\n        .force(\"link\")\n        .links(items.links);\n\n      function tick() {\n        links\n          .attr(\"x1\", function (d) { return d.source.x; })\n          .attr(\"y1\", function (d) { return d.source.y; })\n          .attr(\"x2\", function (d) { return d.target.x; })\n          .attr(\"y2\", function (d) { return d.target.y; })\n          .attr(\"marker-end\", function(d) {\n            return d.type === \"reference\" ? \"url(#service)\" : \"\";\n          });\n\n        circle\n          .attr(\"cx\", function(d) { return d.x; })\n          .attr(\"cy\", function(d) { return d.y; })\n          .attr(\"class\", function(d) { return d.type; })\n          .attr(\"r\", weightRadius);\n\n        label\n          .attr(\"x\", function(d) { return d.x; })\n          .attr(\"y\", function(d) { return d.y; });\n      }\n\n      function weightRadius(d) {\n        var r = d.radius;\n        return r;\n      }\n\n      function zoomed() {\n          svg.attr('transform', 'translate(' + d3.event.transform.x + ',' + d3.event.transform.y + ') scale(' + d3.event.transform.k + ')');\n      }\n\n      function dragstarted(d) {\n          if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n          d.fx = d.x;\n          d.fy = d.y;\n      }\n\n      function dragged(d) {\n          d.fx = d3.event.x;\n          d.fy = d3.event.y;\n      }\n\n      function dragended(d) {\n          if (!d3.event.active) simulation.alphaTarget(0);\n          d.fx = null;\n          d.fy = null;\n      }\n      \n    });\n  }\n\n  render() {\n    return (\n      <div className=\"forcegraph\"></div>\n    )\n  }\n}\n\nexport default Graph;"]},"metadata":{},"sourceType":"module"}