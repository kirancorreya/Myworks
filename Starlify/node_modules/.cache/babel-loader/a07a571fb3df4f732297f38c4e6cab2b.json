{"ast":null,"code":"var _jsxFileName = \"/Users/kirancorreya/Site/Starlify/src/_components/organisation/EditDivision.js\";\nimport React, { Component } from \"react\";\nimport { Col } from \"reactstrap\";\nimport { connect } from \"react-redux\";\nimport addCircle from \"../../_assets/icons/icons/add-icon-circle.svg\";\nimport check from \"../../_assets/icons/icons/check-icon.svg\";\nimport AddTeam from \"./AddTeam\";\nimport EditTeam from \"./EditTeam\";\nimport DeleteTeam from \"./DeleteTeam\";\nimport { fetchTeams } from \"../../_helpers/FetchTeams\";\n\nclass EditDivision extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateDivision = () => {\n      var name = this.state.division_name;\n      fetch(process.env.REACT_APP_API + \"/hypermedia/domain/\" + this.props.domain + \"/organisation/\" + this.props.division.id, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          name: name\n        })\n      }).then(res => res.json()).then(result => {\n        this.props.toggle(true);\n      });\n    };\n\n    this.toggleTeam = (fetch = false) => {\n      const division = this.state.division;\n      this.setState({\n        team_add: false,\n        team_edit: false,\n        team_delete: false,\n        team_data: null\n      });\n\n      if (fetch === true) {\n        fetchTeams(this.props.domain, division.id).then(teams => {\n          let update = Object.assign({}, division);\n\n          if (teams.length !== 0) {\n            update.teams = teams;\n          } else {\n            update.teams = [];\n          }\n\n          this.setState({\n            division: update\n          });\n        });\n      }\n    };\n\n    this.state = {\n      division: props.division,\n      division_name: props.division.name,\n      team_add: false,\n      team_edit: false,\n      team_delete: false,\n      team_data: null\n    };\n  }\n\n  render() {\n    const division = this.state.division;\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, this.state.team_edit === false && this.state.team_delete === false && this.state.team_add === false && React.createElement(\"div\", {\n      className: \"editDivision\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"d-inline-block modal-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \" Edit for \", division.name, \" \"), React.createElement(\"button\", {\n      className: \"btn grey-btn modal-top-btn\",\n      onClick: this.updateDivision.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Done\", React.createElement(\"img\", {\n      src: check,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"modalSearch\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Division name\"), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.division_name,\n      onChange: e => {\n        this.setState({\n          division_name: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"modalList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Teams\"), division.teams.length !== 0 ? React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, division.teams.map((team, i) => {\n      return React.createElement(\"li\", {\n        key: \"team_\" + i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, team.name), React.createElement(Col, {\n        sm: \"5\",\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"settings\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        onClick: () => {\n          this.setState({\n            team_edit: true,\n            team_data: team\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-pen\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      })), React.createElement(\"li\", {\n        onClick: () => {\n          this.setState({\n            team_delete: true,\n            team_data: team\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-trash-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      })))));\n    })) : React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"No teams yet\")), React.createElement(\"div\", {\n      className: \"underline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"addModal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      onClick: () => {\n        this.setState({\n          team_add: true\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \" \", React.createElement(\"img\", {\n      src: addCircle,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), \" Add team \"))), this.state.team_edit && React.createElement(EditTeam, {\n      team: this.state.team_data,\n      toggle: this.toggleTeam,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), this.state.team_delete && React.createElement(DeleteTeam, {\n      team: this.state.team_data,\n      toggle: this.toggleTeam,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), this.state.team_add && React.createElement(AddTeam, {\n      division: division,\n      toggle: this.toggleTeam,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    domain: state.model.domain\n  };\n}\n\nexport default connect(mapStateToProps)(EditDivision);","map":{"version":3,"sources":["/Users/kirancorreya/Site/Starlify/src/_components/organisation/EditDivision.js"],"names":["React","Component","Col","connect","AddTeam","EditTeam","DeleteTeam","fetchTeams","EditDivision","constructor","props","updateDivision","name","state","division_name","fetch","process","env","REACT_APP_API","domain","division","id","method","headers","body","JSON","stringify","then","res","json","result","toggle","toggleTeam","setState","team_add","team_edit","team_delete","team_data","teams","update","Object","assign","length","render","bind","check","e","target","value","map","team","i","addCircle","mapStateToProps","model"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Col } from \"reactstrap\";\nimport { connect } from \"react-redux\";\n\nimport addCircle from \"../../_assets/icons/icons/add-icon-circle.svg\";\nimport check from \"../../_assets/icons/icons/check-icon.svg\";\n\nimport AddTeam from \"./AddTeam\";\nimport EditTeam from \"./EditTeam\";\nimport DeleteTeam from \"./DeleteTeam\";\nimport { fetchTeams } from \"../../_helpers/FetchTeams\";\n\nclass EditDivision extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      division: props.division,\n      division_name: props.division.name,\n      team_add: false,\n      team_edit: false,\n      team_delete: false,\n      team_data: null\n    }\n  }\n\n  updateDivision = () => {\n    var name = this.state.division_name;\n    fetch( process.env.REACT_APP_API + \"/hypermedia/domain/\" + this.props.domain + \"/organisation/\" + this.props.division.id,\n      {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ name: name })\n      }\n    )\n    .then(res => res.json())\n    .then(result => {\n      this.props.toggle(true);\n    });\n  };\n\n  toggleTeam = (fetch = false) => {\n    const {division} = this.state;\n    this.setState({\n      team_add: false,\n      team_edit: false,\n      team_delete: false,\n      team_data: null\n    })\n    if (fetch === true) {\n      fetchTeams(this.props.domain, division.id).then((teams)=>{\n        let update = Object.assign({}, division);\n        if (teams.length !== 0) {\n          update.teams = teams;\n        }else{\n          update.teams = [];\n        }\n        this.setState({\n          division: update\n        })\n      })\n    }\n  }\n\n  render(){\n    const {division} = this.state;\n    return(\n      <React.Fragment>\n        {this.state.team_edit === false && this.state.team_delete === false && this.state.team_add === false && (\n          <div className=\"editDivision\">\n            <h3 className=\"d-inline-block modal-title\"> Edit for {division.name} </h3>\n            <button className=\"btn grey-btn modal-top-btn\" onClick={this.updateDivision.bind(this)}>Done<img src={check} alt=\"\" /></button>\n            <div className=\"modalSearch\">\n              <h4>Division name</h4>\n              <input type=\"text\" value={this.state.division_name} onChange={(e)=>{this.setState({division_name: e.target.value})}}/>\n            </div>\n            <div className=\"modalList\">\n              <h4>Teams</h4>\n              {division.teams.length !== 0 ? (\n                <ul>\n                  {division.teams.map((team,i)=>{\n                    return(\n                      <li key={\"team_\"+i}>\n                        <Col sm=\"7\">{team.name}</Col>\n                        <Col sm=\"5\" className=\"text-center\">\n                          <ul className=\"settings\">\n                            <li onClick={()=>{this.setState({team_edit: true, team_data: team})}}>\n                              <i className=\"fas fa-pen\"></i>\n                            </li>\n                            <li onClick={()=>{this.setState({team_delete: true, team_data: team})}}>\n                              <i className=\"fas fa-trash-alt\"></i>\n                            </li>\n                          </ul>\n                        </Col>\n                      </li>\n                    )\n                  })}\n                </ul>\n              ):(\n                <h1>No teams yet</h1>\n              )}\n            </div>\n            <div className=\"underline\"></div>\n            <div className=\"addModal\">\n              <span onClick={()=>{this.setState({team_add: true})}}> <img src={addCircle} alt=\"\" /> Add team </span>\n            </div>\n          </div>\n        )}\n\n        {this.state.team_edit &&(\n          <EditTeam team={this.state.team_data} toggle={this.toggleTeam} />\n        )}\n\n        {this.state.team_delete &&(\n          <DeleteTeam team={this.state.team_data} toggle={this.toggleTeam} />\n        )}\n\n        {this.state.team_add &&(\n          <AddTeam division={division} toggle={this.toggleTeam} />\n        )}\n      </React.Fragment>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    domain: state.model.domain\n  };\n}\n\nexport default connect(\n  mapStateToProps\n)(EditDivision);\n"]},"metadata":{},"sourceType":"module"}